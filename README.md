# Домашнє завдання 5

## Створення гілки

Створи гілку `hw05-avatars` з гілки `master`.

## Продовження створення REST API для роботи з колекцією контактів

Додай можливість завантаження аватарки користувача через [Multer].

### Крок 1

1. Створи папку `public` для роздачі статики. У цій папці зроби папку `avatars`.
2. Налаштуй Express на роздачу статичних файлів з папки `public`.
3. Поклади будь-яке зображення в папку `public/avatars` і перевір, що роздача статики працює.
4. При переході по такому URL браузер відобразить зображення:  
   `http://localhost:<порт>/avatars/<ім'я файлу з розширенням>`

### Крок 2

1. У схему користувача додай нову властивість `avatarURL` для зберігання зображення:

    ```javascript
    {
      ...
      avatarURL: String,
      ...
    }
    ```

2. Використовуй пакет `gravatar` для того, щоб при реєстрації нового користувача відразу згенерувати йому аватар по його email.

### Крок 3

При реєстрації користувача:

- Створюй посилання на аватарку користувача за допомогою `gravatar`.
- Отриманий URL збережи в поле `avatarURL` під час створення користувача.

### Крок 4

Додай можливість поновлення аватарки, створивши ендпоінт `/users/avatars` і використовуючи метод `PATCH`.

#### Запит
```http
PATCH /users/avatars
Content-Type: multipart/form-data
Authorization: "Bearer {{token}}"
RequestBody: завантажений файл
```

#### Успішна відповідь
```http
Status: 200 OK
Content-Type: application/json
ResponseBody: {
  "avatarURL": "тут буде посилання на зображення"
}
```

#### Неуспішна відповідь
```http
Status: 401 Unauthorized
Content-Type: application/json
ResponseBody: {
  "message": "Not authorized"
}
```

- Створи папку `tmp` в корені проекту і зберігай в неї завантажену аватарку.
- Оброби аватарку пакетом `jimp` і постав для неї розміри 250 на 250.
- Перенеси аватарку користувача з папки `tmp` в папку `public/avatars` і дай їй унікальне ім'я для конкретного користувача.
- Отриманий URL `/avatars/<ім'я файлу з розширенням>` та збережи в поле `avatarURL` користувача.

## Додаткове завдання (необов'язкове)

Написати unit-тести для контролера входу (логін) за допомогою Jest.

- Відповідь повинна мати статус-код 200.
- У відповіді повинен повертатися токен.
- У відповіді повинен повертатися об'єкт `user` з 2 полями `email` і `subscription` з типом даних `String`.