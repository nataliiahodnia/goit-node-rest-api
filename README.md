# Домашнє завдання 3

## Створи гілку 03-mongodb з гілки master.

Продовж створення REST API для роботи з колекцією контактів.

### Крок 1

1. Створи аккаунт на MongoDB Atlas. Після чого в акаунті створи новий проект і налаштуй безкоштовний кластер.
2. Під час налаштування кластера вибери провайдера і регіон як на скріншоті нижче. Якщо вибрати занадто віддалений регіон, швидкість відповіді сервера буде довше.

### Крок 2

1. Встанови графічний редактор MongoDB Compass для зручної роботи з базою даних для MongoDB.
2. Налаштуй підключення своєї хмарної бази даних до Compass.
3. У MongoDB Atlas не забудь створити користувача з правами адміністратора.

### Крок 3

1. Через Compass створи базу даних `db-contacts` і в ній колекцію `contacts`.
2. Використай посилання на JSON і за допомогою Compass наповни колекцію `contacts` (зроби імпорт) його вмістом.

Якщо ви все зробили правильно, дані повинні з'явитися у вашій базі в колекції `contacts`.

### Крок 4

1. Використовуй вихідний код домашньої роботи №2 і заміни зберігання контактів з JSON-файлу на створену тобою базу даних.
2. Напиши код для створення підключення до MongoDB за допомогою Mongoose.
3. При успішному підключенні виведи в консоль повідомлення "Database connection successful".
4. Обов'язково оброби помилку підключення. Виведи в консоль повідомлення помилки і заверши процес, використовуючи `process.exit(1)`.
5. У функціях обробки запитів заміни код CRUD-операцій над контактами з файлу на Mongoose-методи для роботи з колекцією контактів в базі даних.

Схема моделі для колекції `contacts`:

```javascript
{
  name: {
    type: String,
    required: [true, 'Set name for contact'],
  },
  email: {
    type: String,
  },
  phone: {
    type: String,
  },
  favorite: {
    type: Boolean,
    default: false,
  },
}
```

### Крок 5

У нас з'явилося в контактах додаткове поле статусу `favorite`, яке приймає логічне значення `true` або `false`. Воно відповідає за те, що в обраному чи ні знаходиться зазначений контакт. Потрібно реалізувати для оновлення статусу контакту новий роутер:

```http
PATCH /api/contacts/:contactId/favorite
```

1. Отримує параметр `contactId`.
2. Отримує `body` в JSON-форматі з оновленням поля `favorite`.
3. Якщо з `body` все добре, викликає функцію `updateStatusContact(contactId, body)` (напиши її) для поновлення контакту в базі.
4. За результатом роботи функції повертає оновлений об'єкт контакту і статусом 200.
5. В іншому випадку повертає JSON з ключем `{"message": "Not found"}` і статусом 404.
```